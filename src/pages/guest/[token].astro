---
import tokens from '../../data/tokens.json';
import { getGuestByToken } from '../../lib/fetch-guest';


export function getStaticPaths() {
    return tokens.map((token) => ({ params: { token } }));
}

const { token } = Astro.params;
const guest = await getGuestByToken(token);

if(guest?.name === 'Noah') {
    // TODO: poner Among us
}

if (!guest) {
  throw Astro.redirect("/error");
}

---

<div>
    <h1 class="text-2xl font-bold">¡Hola, {guest?.name ?? 'N/A'}</h1>
    <p>Te esperamos el día de la boda 🎉</p>
    
    <p><strong>Mesa:</strong> </p>
    <p><strong>Menú:</strong> </p>
    <p><strong>Acompañantes:</strong> </p>
</div>